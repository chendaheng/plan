webpackJsonp([17],{155:function(t,a,e){function n(t){e(474)}var i=e(37)(e(308),e(559),n,"data-v-c052b438",null);t.exports=i.exports},308:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=["已制定","未制定","制定中"];a.default={name:"warehouseList",data:function(){return{pagination:{currentPage:1,pageSizes:[5,10,20,30,50],pageSize:5,total:400},tableDataA:[],GoBack:!1,GoBackReason:"",list:[],checkAll:!1,checkedCities:[],cities:n,isIndeterminate:!0,select1:"",select2:"",select3:"",clientId:"",brandId:"",rangeId:"",stateId:"",dataRange:"",dataStartTime:"",dataEndTime:"",options1:[],options2:[],options3:[{id:"已制定",name:"已制定"},{id:"已提交",name:"已提交"},{id:"已审核",name:"已审核"},{id:"已下发",name:"已下发"},{id:"已删除",name:"已删除"}],options4:[],tableData:[],pages:0,AnyChanged:[]}},created:function(){var t=this,a=this;a.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName",{customerId:void 0}).then(function(a){t.options2=a.data}).catch(function(t){console.log("获取品牌失败")}),a.$axios.get(window.$config.HOST+"/infoManagement/getRangeName",{brandId:void 0}).then(function(a){t.options4=a.data}).catch(function(t){console.log("获取系列信息失败")}),a.$axios.get(window.$config.HOST+"/baseInfoManagement/getCustomerName").then(function(a){t.options1=a.data}).catch(function(t){console.log("获取客户信息失败")}),console.log("到达这里了");var e={stage:"manage",customerId:void 0,brandId:void 0,rangeId:void 0,name:void 0,clothingLevelId:void 0,startDate:void 0,endDate:void 0};console.log(e),a.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:e}).then(function(a){console.log("获取空搜索集成功"),t.tableData=a.data,t.pagination.total=a.data.length;var e=(t.pagination.currentPage-1)*t.pagination.pageSize,n=(t.pagination.currentPage-1)*t.pagination.pageSize;for(t.tableDataA=[];e-n<t.pagination.pageSize&&e<t.tableData.length;e++)t.tableDataA.push(t.tableData[e]);console.log(a.data)}).catch(function(t){console.log("获取空搜索集失败")})},methods:{handleSizeChange:function(t){this.pagination.pageSize=t,console.log("每页+"+this.pagination.pageSize),this.getWareList()},handleCurrentChange:function(t){this.pagination.currentPage=t,this.getWareList()},searchDetails:function(t){this.$router.push({name:"planMakeIndex",params:{flag:0,goback:"seriesPlanMake",client:t.customerName,brand:t.brandName,series:t.rangeName,id:t.planObjectId,plantype:0,planobj:t.planObject,TopPlan:0,TopPlanName:"根计划",planName:t.name,projectType:t.projectType,number:t.number,dataStart:t.startDate,dataEnd:t.dataEnd,productDate:t.productDate,productDateType:t.productDateType,productId:t.productId,proposal:t.proposal,note:t.note,description:t.description}})},changeDate:function(t){if(console.log(t),t){var a=t.getFullYear(),e=t.getMonth()+1;e=e<10?"0"+e:e;var n=t.getDate();n=n<10?"0"+n:n;var i=(t.getHours(),t.getMinutes());i=i<10?"0"+i:i;var s=t.getSeconds();return s=i<10?"0"+s:s,a+"-"+e+"-"+n}},getWareList:function(){var t=this,a=this;this.DataStartTime=a.changeDate(this.dataRange[0]),this.DataEndTime=a.changeDate(this.dataRange[1]);var e={stage:"manage",customerId:""===this.clientId?void 0:this.clientId,brandId:""===this.brandId?void 0:this.brandId,rangeId:""===this.rangeId?void 0:this.rangeId,name:void 0,clothingLevelId:void 0,startDate:this.DataStartTime,endDate:this.DataEndTime};console.log(e),a.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:e}).then(function(a){""!=t.stateId?(t.tableData=[],a.data.forEach(function(a){a.state===t.stateId&&t.tableData.push(a)})):t.tableData=a.data,t.pagination.total=t.tableData.length;var e=(t.pagination.currentPage-1)*t.pagination.pageSize,n=(t.pagination.currentPage-1)*t.pagination.pageSize;for(t.tableDataA=[];e-n<t.pagination.pageSize&&e<t.tableData.length;e++)t.tableDataA.push(t.tableData[e])}).catch(function(t){})},isChanged:function(t){this.AnyChanged=t},GoBackCancel:function(){this.GoBack=!1},GoBackConfirm:function(){var t=this;this.AnyChanged.forEach(function(a){console.log(a);var e={id:a.id,reason:t.GoBackReason};console.log(e),t.$axios.get(window.$config.HOST+"/planManagement/failPlan",{params:e}).then(function(a){a.data>=0?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败",type:"error"})}).catch(function(a){t.$message({message:"操作失败!",type:"error"})})}),this.GoBack=!1},VerifyPass:function(){var t=this;if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});for(var a=0;a<this.AnyChanged.length;a++)this.$axios.get(window.$config.HOST+"/planManagement/passPlan",{params:{id:this.AnyChanged[a].id}}).then(function(a){console.log(a.data),a.data>=0?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败",type:"error"})}).catch(function(a){t.$message({message:"操作失败!",type:"error"})})},VerifyRebut:function(){if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});this.GoBack=!0},CancelVerify:function(){var t=this;if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});for(var a=0;a<this.AnyChanged.length;a++)this.$axios.get(window.$config.HOST+"/planManagement/cancelPassPlan",{params:{id:this.AnyChanged[a].id}}).then(function(a){a.data>=0?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败",type:"error"})}).catch(function(a){t.$message({message:"操作失败!",type:"error"})})},handleCheckAllChange:function(t){this.checkedCities=t?n:[],this.isIndeterminate=!1},check:function(t){var a=this;t.forEach(function(t){a.index.push(t)})},handleCheckedCitiesChange:function(t){var a=t.length;this.checkAll=a===this.cities.length,this.isIndeterminate=a>0&&a<this.cities.length}}}},425:function(t,a,e){a=t.exports=e(123)(!0),a.push([t.i,".box-card[data-v-c052b438]{margin:20px 50px;padding:0 20px}.box-card .bar[data-v-c052b438]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.box-card .bar .title[data-v-c052b438]{font-size:14px;min-width:75px;text-align:center}.box-card .bar .el-input[data-v-c052b438],.box-card .bar .el-select[data-v-c052b438]{width:300px;min-width:75px}.box-card .block[data-v-c052b438]{padding:30px 0;text-align:center}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/planManagement/planVerify.vue"],names:[],mappings:"AACA,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,gCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,UAAY,CACb,AACD,uCACE,eAAgB,AAChB,eAAgB,AAChB,iBAAmB,CACpB,AAKD,qFAHE,YAAa,AACb,cAAgB,CAKjB,AACD,kCACE,eAAgB,AAChB,iBAAmB,CACpB",file:"planVerify.vue",sourcesContent:["\n.box-card[data-v-c052b438] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .bar[data-v-c052b438] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n}\n.box-card .bar .title[data-v-c052b438] {\n  font-size: 14px;\n  min-width: 75px;\n  text-align: center;\n}\n.box-card .bar .el-input[data-v-c052b438] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .bar .el-select[data-v-c052b438] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .block[data-v-c052b438] {\n  padding: 30px 0;\n  text-align: center;\n}\n"],sourceRoot:""}])},474:function(t,a,e){var n=e(425);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(124)("803cbdb6",n,!0)},559:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"body"},[e("el-card",{staticClass:"box-card"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[t._v("客户名称")]),t._v(" "),e("el-select",{attrs:{clearable:""},model:{value:t.clientId,callback:function(a){t.clientId=a},expression:"clientId"}},t._l(t.options1,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[t._v("品牌")]),t._v(" "),e("el-select",{attrs:{clearable:""},model:{value:t.brandId,callback:function(a){t.brandId=a},expression:"brandId"}},t._l(t.options2,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[t._v("审核状态")]),t._v(" "),e("el-select",{attrs:{clearable:""},model:{value:t.stateId,callback:function(a){t.stateId=a},expression:"stateId"}},t._l(t.options3,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)])],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"25px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[t._v("新建时间")]),t._v(" "),e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.dataRange,callback:function(a){t.dataRange=a},expression:"dataRange"}})],1)]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[t._v("系列名称")]),t._v(" "),e("el-select",{attrs:{clearable:""},model:{value:t.rangeId,callback:function(a){t.rangeId=a},expression:"rangeId"}},t._l(t.options4,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)]),t._v(" "),e("el-col",{attrs:{offset:0,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.getWareList}},[t._v("查询")])],1)])],1)],1),t._v(" "),e("el-card",{staticClass:"box-card"},[e("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.VerifyPass}},[t._v("审核通过")])],1)]),t._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.VerifyRebut}},[t._v("审核驳回")])],1)]),t._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.CancelVerify}},[t._v("取消审核")])],1)]),t._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"}},[t._v("查看总计划")])],1)])],1),t._v(" "),e("br"),t._v(" "),e("hr"),t._v(" "),e("br"),t._v(" "),e("div",[e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableDataA,"max-height":"400",border:"",stripe:!0,"highlight-current-row":!0},on:{"selection-change":t.isChanged}},[e("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"number",label:"预测编号",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"brandName",label:"品牌",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"计划名称",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rangeName",label:"系列名称",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"planObject",label:"计划对象",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"projectType",label:"项目类型",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"startDate",label:"计划开始",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"endDate",label:"计划结束",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"state",label:"审核状态",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.searchDetails(a.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":t.pagination.currentPage,"page-sizes":t.pagination.pageSizes,"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.$set(t.pagination,"currentPage",a)}}})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"驳回理由",visible:t.GoBack,modal:!1},on:{"update:visible":function(a){t.GoBack=a}}},[e("div",{staticClass:"body"},[e("el-row",{attrs:{gutter:20}},[e("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.GoBackReason,callback:function(a){t.GoBackReason=a},expression:"GoBackReason"}})],1),t._v(" "),e("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.GoBackConfirm}},[t._v("确认")])],1)]),t._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.GoBackCancel}},[t._v("取消")])],1)])],1)],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=17.8d586e3eba4594098bcc.js.map